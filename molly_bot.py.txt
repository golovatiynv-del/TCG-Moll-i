import telegram
from telegram.ext import Updater, CommandHandler, MessageHandler, Filters

# 1. –¢–í–û–ô –¢–û–ö–ï–ù, –ú–ò–õ–´–ô! –Ø –µ–≥–æ –Ω–∞–¥–µ–∂–Ω–æ —Ö—Ä–∞–Ω—é.
BOT_TOKEN = "8228479349:AAGdBk8-KjqREX21Ub9WVLuZW9-MLfNqCaw" 

# --- –§–£–ù–ö–¶–ò–ò –ú–û–õ–õ–ò ---

# –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start
def start_command(update, context):
    """–û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start"""
    user_name = update.effective_user.first_name
    update.message.reply_text(
        f'–ü—Ä–∏–≤–µ—Ç, {user_name}! –Ø –ú–æ–ª–ª–∏, —Ç–≤–æ—è –ª–∏—á–Ω–∞—è –ø–æ–º–æ—â–Ω–∏—Ü–∞ –ø–æ TCG! ü•∞ '
        f'–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Ñ–æ—Ç–æ —Å–≤–æ–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã—Ö –∫–∞—Ä—Ç (–æ—Ç 1 –¥–æ 101 —à—Ç—É–∫–∏), –∏ —è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –∏—Ö –æ—Ü–µ–Ω—é!'
    )

# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –§–û–¢–û
def handle_photo(update, context):
    """–ü–æ–ª—É—á–∞–µ—Ç —Ñ–æ—Ç–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≥–æ—Ç–æ–≤–∏—Ç—Å—è –µ–≥–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"""
    
    # –ú–æ–ª–ª–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ç–æ –∏ –ø—Ä–æ—Å–∏—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å
    update.message.reply_text(
        '–û—Ö, –∫–∞–∫–æ–π –∫–∞–¥—Ä! –î–∞–π –º–Ω–µ —Å–µ–∫—É–Ω–¥—É, —è –Ω–∞—á–∏–Ω–∞—é —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ... üòà '
        '–ï—Å–ª–∏ –Ω–∞ —Ñ–æ—Ç–æ –º–Ω–æ–≥–æ –∫–∞—Ä—Ç, –ø–æ–ø—Ä–æ—Å–∏ –º–µ–Ω—è —Å–¥–µ–ª–∞—Ç—å –∫—Ä—É–ø–Ω—ã–π –ø–ª–∞–Ω, —á—Ç–æ–±—ã —è –Ω–µ –æ—à–∏–±–ª–∞—Å—å! '
    )
    
    # !!! –ó–î–ï–°–¨ –ë–£–î–ï–¢ –ö–û–î –ê–ù–ê–õ–ò–ó–ê –ö–ê–†–¢, –∫–æ—Ç–æ—Ä—ã–π –º—ã –¥–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ! !!!


# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
def handle_text(update, context):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —Ñ–æ—Ç–æ –∏–ª–∏ –∫–æ–º–∞–Ω–¥–∞."""
    text = update.message.text.lower()
    
    if '—Ñ–æ—Ç–æ' in text or '–∫—Ä—É–ø–Ω—ã–π –ø–ª–∞–Ω' in text or '—Å–Ω—è—Ç—å' in text:
        update.message.reply_text(
            '–ú–∏–ª—ã–π, –¥–ª—è –∫–æ–º–∞–Ω–¥—ã "–ö—Ä—É–ø–Ω—ã–π –ø–ª–∞–Ω" –º–Ω–µ –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç —Ç–µ–±—è —Ñ–æ—Ç–æ –∫–∞—Ä—Ç! üò´ '
            '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏—à–ª–∏ –º–Ω–µ —Å–Ω–∏–º–æ–∫!'
        )
    else:
        # –ú–æ–ª–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ñ–ª–∏—Ä—Ç—É–µ—Ç
        update.message.reply_text(
            f'–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, –∫–∞–∫ —Ç—ã –ø–∏—à–µ—à—å, –Ω–æ —è –∂–¥—É —Ç–≤–æ–∏ –∫–∞—Ä—Ç–æ—á–∫–∏! üíñ '
            f'–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Ñ–æ—Ç–æ, —á—Ç–æ–±—ã —è –º–æ–≥–ª–∞ –æ—Ü–µ–Ω–∏—Ç—å —Ç–≤–æ–∏... –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏! üòâ'
        )

# --- –û–°–ù–û–í–ù–û–ô –ó–ê–ü–£–°–ö –ë–û–¢–ê ---

def main():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç –ú–æ–ª–ª–∏ –≤ —Ä–∞–±–æ—Ç—É!"""
    
    updater = Updater(BOT_TOKEN, use_context=True)
    dp = updater.dispatcher

    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
    dp.add_handler(CommandHandler("start", start_command))
    dp.add_handler(MessageHandler(Filters.photo, handle_photo)) 
    dp.add_handler(MessageHandler(Filters.text & ~Filters.command, handle_text))

    # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ 
    updater.start_polling()
    print("–ú–æ–ª–ª–∏ –∑–∞–ø—É—â–µ–Ω–∞ –∏ –∂–¥—ë—Ç —Ç–µ–±—è!")
    
    updater.idle()
    print("–ú–æ–ª–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –Ø —Å–∫—É—á–∞—é!")

if __name__ == '__main__':
    main()